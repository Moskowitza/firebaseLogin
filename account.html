<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Firebase Login</title>
    <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyDJnxX7y9ku7neALQG2xTqZ9tByFOfYfwo",
        authDomain: "loginwith-8506a.firebaseapp.com",
        databaseURL: "https://loginwith-8506a.firebaseio.com",
        projectId: "loginwith-8506a",
        storageBucket: "loginwith-8506a.appspot.com",
        messagingSenderId: "437861183874",
      };
      firebase.initializeApp(config);
    </script>
    <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase-auth.js"></script>
    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <link
      type="text/css"
      rel="stylesheet"
      href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css"
    />
  </head>
  <body>
    <div id="welcome">Welcome</div>
    <!-- <button onclick="googleSignin()">Google Signin</button>
    <button onclick="googleSignout()">Google Signout</button> -->
    <div id="firebaseui-auth-container"></div>
    <script>
      const uiConfig = {
        callbacks: {
          signInSuccessWithAuthResult: function(authResult, redirectUrl) {
            var user = authResult.user;
            var credential = authResult.credential;
            var isNewUser = authResult.additionalUserInfo.isNewUser;
            var providerId = authResult.additionalUserInfo.providerId;
            var operationType = authResult.operationType;
            // Do something with the returned AuthResult.
            // Return type determines whether we continue the redirect automatically
            // or whether we leave that to developer to handle.
            return true;
          },
          signInFailure: function(error) {
            // Some unrecoverable error occurred during sign-in.
            // Return a promise when error handling is completed and FirebaseUI
            // will reset, clearing any UI. This commonly occurs for error code
            // 'firebaseui/anonymous-upgrade-merge-conflict' when merge conflict
            // occurs. Check below for more details on this.
            return handleUIError(error);
          },
        },
        signInSuccessUrl:
          "https://moskowitza.github.io/firebaseLogin/account.html",
        signInOptions: [firebase.auth.GoogleAuthProvider.PROVIDER_ID],
        tosUrl: "https://moskowitza.github.io/firebaseLogin/account.html",
      };
      const auth = app.auth();
      const ui = new firebaseui.auth.AuthUI(auth);

      ui.start(`#firebaseui-auth-container`, uiConfig);
    </script>
    <button id="signOut">Sign Out</button>
    <div id="loader">...loading</div>

    <script>
      document
        .getElementById("signOut")
        .addEventListener("click", function(event) {
          firebase.auth().signOut();
        });
    </script>
  </body>
</html>
